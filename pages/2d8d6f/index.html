<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Javaç½‘ç»œç¼–ç¨‹é¢è¯•é¢˜(äºŒ) | Kangec blog</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="æµ…å¢¨æ¼«èŠ³å çƒ­çˆ±ç”Ÿæ´»ï¼Œåˆ†äº«æŠ€æœ¯">
    <meta name="keywords" content="ä¸ªäººæŠ€æœ¯åšå®¢,åç«¯,åç«¯å¼€å‘,åç«¯æ¡†æ¶,Spring,Springé¢è¯•é¢˜,æŠ€æœ¯æ–‡æ¡£,å­¦ä¹ ,é¢è¯•,Java,js,ES6,vue,,Node,git,github,markdown">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/assets/css/0.styles.ceb2dd07.css" as="style"><link rel="preload" href="/assets/js/app.77792ac2.js" as="script"><link rel="preload" href="/assets/js/2.b4afc22d.js" as="script"><link rel="preload" href="/assets/js/8.498b1d4c.js" as="script"><link rel="prefetch" href="/assets/js/10.4e5e3899.js"><link rel="prefetch" href="/assets/js/11.2fc8ab65.js"><link rel="prefetch" href="/assets/js/12.392be3ca.js"><link rel="prefetch" href="/assets/js/13.84916da8.js"><link rel="prefetch" href="/assets/js/14.bc4b5391.js"><link rel="prefetch" href="/assets/js/15.28097ebc.js"><link rel="prefetch" href="/assets/js/16.fc6a6a65.js"><link rel="prefetch" href="/assets/js/17.958434ca.js"><link rel="prefetch" href="/assets/js/18.d77699a0.js"><link rel="prefetch" href="/assets/js/19.b79a7512.js"><link rel="prefetch" href="/assets/js/20.6b34b2c3.js"><link rel="prefetch" href="/assets/js/3.c67c8fab.js"><link rel="prefetch" href="/assets/js/4.a27a64e8.js"><link rel="prefetch" href="/assets/js/5.f13e5666.js"><link rel="prefetch" href="/assets/js/6.18baa688.js"><link rel="prefetch" href="/assets/js/7.4862c479.js"><link rel="prefetch" href="/assets/js/9.99831f03.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ceb2dd07.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container have-rightmenu have-body-img"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Kangec blog" class="logo"> <span class="site-name can-hide">Kangec blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><a href="/food/" class="nav-link">åˆ†äº«ç¾é£Ÿ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ä¸“æ " class="dropdown-title"><a href="/column/" class="link-title">ä¸“æ </a> <span class="title" style="display:none;">ä¸“æ </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/java/" class="nav-link"> JavaåŸºç¡€</a></li><li class="dropdown-item"><!----> <a href="/note/netty/" class="nav-link"> Netty</a></li><li class="dropdown-item"><!----> <a href="/note/spring/" class="nav-link"> Spring</a></li><li class="dropdown-item"><!----> <a href="/note/springboot/" class="nav-link"> Spring Boot</a></li></ul></div></div><div class="nav-item"><a href="/categories/" class="nav-link">åˆ†ç±»</a></div><div class="nav-item"><a href="/tags/" class="nav-link">æ ‡ç­¾</a></div><div class="nav-item"><a href="/archives/" class="nav-link">å½’æ¡£</a></div> <a href="https://github.com/kangec/kangec.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/logo.png"> <div class="blogger-info"><h3>Kangec liu</h3> <span>
        æµ…å¢¨æ¼«èŠ³å
      </span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><a href="/food/" class="nav-link">åˆ†äº«ç¾é£Ÿ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ä¸“æ " class="dropdown-title"><a href="/column/" class="link-title">ä¸“æ </a> <span class="title" style="display:none;">ä¸“æ </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/java/" class="nav-link"> JavaåŸºç¡€</a></li><li class="dropdown-item"><!----> <a href="/note/netty/" class="nav-link"> Netty</a></li><li class="dropdown-item"><!----> <a href="/note/spring/" class="nav-link"> Spring</a></li><li class="dropdown-item"><!----> <a href="/note/springboot/" class="nav-link"> Spring Boot</a></li></ul></div></div><div class="nav-item"><a href="/categories/" class="nav-link">åˆ†ç±»</a></div><div class="nav-item"><a href="/tags/" class="nav-link">æ ‡ç­¾</a></div><div class="nav-item"><a href="/archives/" class="nav-link">å½’æ¡£</a></div> <a href="https://github.com/kangec/kangec.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Javaç½‘ç»œç¼–ç¨‹é¢è¯•é¢˜(äºŒ)</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/2d8d6f/#_10ã€nio-buffer-çš„å†…éƒ¨ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ" class="sidebar-link">10ã€Nio buffer çš„å†…éƒ¨ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/2d8d6f/#_11ã€java-nio-ä¸­çš„-channelæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ" class="sidebar-link">11ã€Java NIO ä¸­çš„ Channelæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/2d8d6f/#_12ã€java-nioä¸­çš„selectoræ˜¯ä»€ä¹ˆï¼Ÿ" class="sidebar-link">12ã€Java NIOä¸­çš„Selectoræ˜¯ä»€ä¹ˆï¼Ÿ</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/2d8d6f/#_13ã€ç®€å•è®²ä¸€ä¸‹æ–‡ä»¶ioä¸­çš„pathå’Œfiles" class="sidebar-link">13ã€ç®€å•è®²ä¸€ä¸‹æ–‡ä»¶IOä¸­çš„Pathå’ŒFiles</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <div><main class="page"> <div class="theme-vdoing-wrapper"><div class="articleInfo-wrap" data-v-14888ed5><div class="articleInfo" data-v-14888ed5><ul class="breadcrumbs" data-v-14888ed5><li data-v-14888ed5><a href="/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-14888ed5></a></li> <li data-v-14888ed5><a href="/categories/?category=%E9%9D%A2%E8%AF%95%E9%A2%98" title="åˆ†ç±»" data-v-14888ed5>é¢è¯•é¢˜</a></li> <li data-v-14888ed5><a href="/categories/?category=Java%E9%9D%A2%E8%AF%95%E9%A2%98" title="åˆ†ç±»" data-v-14888ed5>Javaé¢è¯•é¢˜</a></li></ul> <div class="info" data-v-14888ed5><div title="ä½œè€…" class="author iconfont icon-touxiang" data-v-14888ed5><a href="https://github.com/kangec" target="_blank" title="ä½œè€…" class="beLink" data-v-14888ed5>Kangec liu</a></div> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-14888ed5><a href="javascript:;" data-v-14888ed5>2020-07-24</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">
          Javaç½‘ç»œç¼–ç¨‹é¢è¯•é¢˜(äºŒ)
        </h1> <div class="theme-vdoing-content content__default"><h2 id="_10ã€nio-buffer-çš„å†…éƒ¨ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#_10ã€nio-buffer-çš„å†…éƒ¨ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ" class="header-anchor">#</a> 10ã€Nio buffer çš„å†…éƒ¨ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ</h2> <p>ä¸€ä¸ª buffer ä¸»è¦ç”± position,limit,capacity ä¸‰ä¸ªå˜é‡æ¥æ§åˆ¶è¯»å†™çš„è¿‡ç¨‹ã€‚æ­¤ä¸‰ä¸ªå˜é‡çš„å«ä¹‰è§å¦‚ä¸‹è¡¨æ ¼ï¼š</p> <table><thead><tr><th>å‚æ•°</th> <th>å†™æ¨¡å¼</th> <th>è¯»æ¨¡å¼</th></tr></thead> <tbody><tr><td>position</td> <td>å½“å‰å†™å…¥çš„å•ä½æ•°æ®æ•°é‡</td> <td>å½“å‰è¯»å–çš„å•ä½æ•°æ®ä½ç½®</td></tr> <tr><td>limit</td> <td>ä»£è¡¨æœ€å¤šèƒ½å†™å¤šå°‘å•ä½æ•°æ®å’Œå®¹é‡æ˜¯ä¸€æ ·çš„</td> <td>ä»£è¡¨æœ€å¤šèƒ½è¯»å¤šå°‘å•ä½æ•°æ®ï¼Œå’Œä¹‹å‰å†™å…¥çš„å•ä½æ•°æ®é‡ä¸€è‡´</td></tr> <tr><td>capacity</td> <td>buffer å®¹é‡</td> <td>buffer å®¹é‡</td></tr></tbody></table> <p><strong>Buffer å¸¸è§æ–¹æ³•ï¼š</strong></p> <ol><li>flip(): å†™æ¨¡å¼è½¬æ¢æˆè¯»æ¨¡å¼</li> <li>rewind() ï¼šå°† position é‡ç½®ä¸º 0 ï¼Œä¸€èˆ¬ç”¨äºé‡å¤è¯»ã€‚</li> <li>clear() ï¼šæ¸…ç©º buffer ï¼Œå‡†å¤‡å†æ¬¡è¢«å†™å…¥ (position å˜æˆ 0 ï¼Œ limit å˜æˆ capacity) ã€‚</li> <li>compact(): å°†æœªè¯»å–çš„æ•°æ®æ‹·è´åˆ° buffer çš„å¤´éƒ¨ä½ã€‚</li> <li>mark() ã€ reset():mark å¯ä»¥æ ‡è®°ä¸€ä¸ªä½ç½®ï¼Œ reset å¯ä»¥é‡ç½®åˆ°è¯¥ä½ç½®ã€‚</li></ol> <p><strong>Buffer å¸¸è§ç±»å‹ï¼š</strong> ByteBuffer ã€ MappedByteBuffer ã€ CharBuffer ã€ DoubleBuffer ã€ FloatBuffer ã€ IntBuffer ã€LongBuffer ã€ ShortBuffer ã€‚</p> <p>**channel å¸¸è§ç±»å‹ ğŸ˜—*FileChannel ã€ DatagramChannel(UDP) ã€ SocketChannel(TCP) ã€ ServerSocketChannel(TCP)</p> <h2 id="_11ã€java-nio-ä¸­çš„-channelæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ"><a href="#_11ã€java-nio-ä¸­çš„-channelæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ" class="header-anchor">#</a> 11ã€Java NIO ä¸­çš„ Channelæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ</h2> <p>Channelï¼šJava NIOä¸­çš„SocketChannelæ˜¯ä¸€ä¸ªè¿æ¥åˆ°TCPç½‘ç»œå¥—æ¥å­—çš„é€šé“ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹2ç§æ–¹å¼åˆ›å»ºSocketChannelï¼š</p> <ol><li><p>æ‰“å¼€ä¸€ä¸ªSocketChannelå¹¶è¿æ¥åˆ°äº’è”ç½‘ä¸Šçš„æŸå°æœåŠ¡å™¨ã€‚</p></li> <li><p>ä¸€ä¸ªæ–°è¿æ¥åˆ°è¾¾ServerSocketChannelæ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªSocketChannelã€‚</p></li> <li><p>æ‰“å¼€ SocketChannel  ä¸‹é¢æ˜¯SocketChannelçš„æ‰“å¼€æ–¹å¼ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">SocketChannel</span> socketChannel <span class="token operator">=</span> <span class="token class-name">SocketChannel</span><span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
socketChannel<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InetSocketAddress</span><span class="token punctuation">(</span><span class="token string">&quot;http://jenkov.com&quot;</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>å…³é—­ SocketChannel</p></li> <li><p>å½“ç”¨å®ŒSocketChannelä¹‹åè°ƒç”¨SocketChannel.close()å…³é—­SocketChannelï¼š  <code>socketChannel.close();</code></p></li> <li><p>ä» SocketChannel è¯»å–æ•°æ® :è¦ä»SocketChannelä¸­è¯»å–æ•°æ®ï¼Œè°ƒç”¨ä¸€ä¸ªread()çš„æ–¹æ³•ä¹‹ä¸€ã€‚
<code>ByteBuffer buf = ByteBuffer.allocate(48);</code> <code>int bytesRead = socketChannel.read(buf);</code></p></li> <li><p>éé˜»å¡æ¨¡å¼:å¯ä»¥è®¾ç½® SocketChannel ä¸ºéé˜»å¡æ¨¡å¼ï¼ˆnon-blocking modeï¼‰.è®¾ç½®ä¹‹åï¼Œå°±å¯ä»¥åœ¨å¼‚æ­¥æ¨¡å¼ä¸‹è°ƒç”¨connect(), read() å’Œwrite()äº†ã€‚
å¦‚æœSocketChannelåœ¨éé˜»å¡æ¨¡å¼ä¸‹ï¼Œæ­¤æ—¶è°ƒç”¨connect()ï¼Œè¯¥æ–¹æ³•å¯èƒ½åœ¨è¿æ¥å»ºç«‹ä¹‹å‰å°±è¿”å›äº†ã€‚ä¸ºäº†ç¡®å®šè¿æ¥æ˜¯å¦å»ºç«‹ï¼Œå¯ä»¥è°ƒç”¨finishConnect()çš„æ–¹æ³•ã€‚åƒè¿™æ ·ï¼š</p></li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code>socketChannel<span class="token punctuation">.</span><span class="token function">configureBlocking</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
socketChannel<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InetSocketAddress</span><span class="token punctuation">(</span><span class="token string">&quot;http://jenkov.com&quot;</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span> socketChannel<span class="token punctuation">.</span><span class="token function">finishConnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//wait, or do something else...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>Java NIO Channelé€šé“å’Œæµéå¸¸ç›¸ä¼¼ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹åŒºåˆ«ï¼š</strong></p> <ul><li>é€šé“å¯ä»¥è¯»ä¹Ÿå¯ä»¥å†™ï¼Œæµä¸€èˆ¬æ¥è¯´æ˜¯å•å‘çš„ï¼ˆåªèƒ½è¯»æˆ–è€…å†™ï¼Œæ‰€ä»¥ä¹‹å‰æˆ‘ä»¬ç”¨æµè¿›è¡ŒIOæ“ä½œçš„æ—¶å€™éœ€è¦åˆ†åˆ«åˆ›å»ºä¸€ä¸ªè¾“å…¥æµå’Œä¸€ä¸ªè¾“å‡ºæµï¼‰ã€‚</li> <li>é€šé“å¯ä»¥å¼‚æ­¥è¯»å†™ã€‚</li> <li>é€šé“æ€»æ˜¯åŸºäºç¼“å†²åŒºBufferæ¥è¯»å†™ã€‚</li></ul> <p><strong>Java NIOä¸­æœ€é‡è¦çš„å‡ ä¸ªChannelçš„å®ç°ï¼š</strong></p> <ul><li>FileChannelï¼š ç”¨äºæ–‡ä»¶çš„æ•°æ®è¯»å†™</li> <li>DatagramChannelï¼š ç”¨äºUDPçš„æ•°æ®è¯»å†™</li> <li>SocketChannelï¼š ç”¨äºTCPçš„æ•°æ®è¯»å†™ï¼Œä¸€èˆ¬æ˜¯å®¢æˆ·ç«¯å®ç°</li> <li>ServerSocketChannel: å…è®¸æˆ‘ä»¬ç›‘å¬TCPé“¾æ¥è¯·æ±‚ï¼Œæ¯ä¸ªè¯·æ±‚ä¼šåˆ›å»ºä¼šä¸€ä¸ªSocketChannelï¼Œä¸€èˆ¬æ˜¯æœåŠ¡å™¨å®ç°</li></ul> <p><strong>ç±»å±‚æ¬¡ç»“æ„</strong></p> <div class="center-container"><p><img src="https://i.loli.net/2020/07/24/1XsJLVFK9iuAmtS.png" alt=""></p></div><h2 id="_12ã€java-nioä¸­çš„selectoræ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#_12ã€java-nioä¸­çš„selectoræ˜¯ä»€ä¹ˆï¼Ÿ" class="header-anchor">#</a> 12ã€Java NIOä¸­çš„Selectoræ˜¯ä»€ä¹ˆï¼Ÿ</h2> <p><strong>Selectorï¼ˆé€‰æ‹©å™¨ï¼‰ï¼š</strong></p> <p>Selector ä¸€èˆ¬ç§° ä¸ºé€‰æ‹©å™¨ ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ç¿»è¯‘ä¸º å¤šè·¯å¤ç”¨å™¨ ã€‚å®ƒæ˜¯Java NIOæ ¸å¿ƒç»„ä»¶ä¸­çš„ä¸€ä¸ªï¼Œç”¨äºæ£€æŸ¥ä¸€ä¸ªæˆ–å¤šä¸ªNIO Channelï¼ˆé€šé“ï¼‰çš„çŠ¶æ€æ˜¯å¦å¤„äºå¯è¯»ã€å¯å†™ã€‚å¦‚æ­¤å¯ä»¥å®ç°å•çº¿ç¨‹ç®¡ç†å¤šä¸ªchannels,ä¹Ÿå°±æ˜¯å¯ä»¥ç®¡ç†å¤šä¸ªç½‘ç»œé“¾æ¥ã€‚ä½¿ç”¨Selectorçš„å¥½å¤„åœ¨äºï¼š ä½¿ç”¨æ›´å°‘çš„çº¿ç¨‹æ¥å°±å¯ä»¥æ¥å¤„ç†é€šé“äº†ï¼Œ ç›¸æ¯”ä½¿ç”¨å¤šä¸ªçº¿ç¨‹ï¼Œé¿å…äº†çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢å¸¦æ¥çš„å¼€é”€</p> <p><strong>Selectorçš„åˆ›å»º</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Selector</span> selector <span class="token operator">=</span> <span class="token class-name">Selector</span><span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//æ³¨å†ŒChannelåˆ°Selector(Channelå¿…é¡»æ˜¯éé˜»å¡çš„)</span>
channel<span class="token punctuation">.</span><span class="token function">configureBlocking</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">SelectionKey</span> key <span class="token operator">=</span> channel<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>selector<span class="token punctuation">,</span> <span class="token class-name">Selectionkey</span><span class="token punctuation">.</span>OP_READ<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>SelectionKeyä»‹ç»</strong></p> <p>ä¸€ä¸ªSelectionKeyé”®è¡¨ç¤ºäº†ä¸€ä¸ªç‰¹å®šçš„é€šé“å¯¹è±¡å’Œä¸€ä¸ªç‰¹å®šçš„é€‰æ‹©å™¨å¯¹è±¡ä¹‹é—´çš„æ³¨å†Œå…³ç³»ã€‚ä»Selectorä¸­é€‰æ‹©channel(Selecting Channels via a Selector)
é€‰æ‹©å™¨ç»´æŠ¤æ³¨å†Œè¿‡çš„é€šé“çš„é›†åˆï¼Œå¹¶ä¸”è¿™ç§æ³¨å†Œå…³ç³»éƒ½è¢«å°è£…åœ¨SelectionKeyå½“ä¸­.</p> <p><strong>åœæ­¢é€‰æ‹©çš„æ–¹æ³•</strong></p> <p>wakeup()æ–¹æ³• å’Œclose()æ–¹æ³•ã€‚</p> <h2 id="_13ã€ç®€å•è®²ä¸€ä¸‹æ–‡ä»¶ioä¸­çš„pathå’Œfiles"><a href="#_13ã€ç®€å•è®²ä¸€ä¸‹æ–‡ä»¶ioä¸­çš„pathå’Œfiles" class="header-anchor">#</a> 13ã€ç®€å•è®²ä¸€ä¸‹æ–‡ä»¶IOä¸­çš„Pathå’ŒFiles</h2> <p><strong>æ–‡ä»¶I/OåŸºçŸ³ï¼šPathï¼š</strong></p> <p>åˆ›å»ºä¸€ä¸ªPath</p> <p>Fileå’ŒPathä¹‹é—´çš„è½¬æ¢ï¼ŒFileå’ŒURIä¹‹é—´çš„è½¬æ¢</p> <p>è·å–Pathçš„ç›¸å…³ä¿¡æ¯</p> <p>ç§»é™¤Pathä¸­çš„å†—ä½™é¡¹</p> <p><strong>Filesç±»ï¼š</strong></p> <p>Files.exists() æ£€æµ‹æ–‡ä»¶è·¯å¾„æ˜¯å¦å­˜åœ¨</p> <p>Files.createFile() åˆ›å»ºæ–‡ä»¶</p> <p>Files.createDirectories()å’ŒFiles.createDirectory()åˆ›å»ºæ–‡ä»¶å¤¹</p> <p>Files.delete()æ–¹æ³• å¯ä»¥åˆ é™¤ä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•</p> <p>Files.copy()æ–¹æ³•å¯ä»¥å§ä¸€ä¸ªæ–‡ä»¶ä»ä¸€ä¸ªåœ°å€å¤åˆ¶åˆ°å¦ä¸€ä¸ªä½ç½®</p> <p>è·å–æ–‡ä»¶å±æ€§</p> <p>éå†ä¸€ä¸ªæ–‡ä»¶å¤¹</p> <p>Files.walkFileTree()éå†æ•´ä¸ªç›®å½•</p></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/kangec/kangec.github.io/edit/master/docs/02.é¢è¯•é¢˜/01.Javaé¢è¯•é¢˜/20.Javaç½‘ç»œç¼–ç¨‹é¢è¯•é¢˜.md" target="_blank" rel="noopener noreferrer">ç¼–è¾‘</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="tags"><a href="/tags/?tag=%E9%9D%A2%E8%AF%95%E9%A2%98" title="æ ‡ç­¾">
      #é¢è¯•é¢˜
    </a></div> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">2020/07/24, 1:07:00</span></div></div> <div class="page-nav-wapper"><!----> <!----></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">æœ€è¿‘æ›´æ–°</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/1e323d/"><div>Javaç½‘ç»œç¼–ç¨‹é¢è¯•é¢˜(ä¸‰)</div></a> <span>07-24</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/59b860/"><div>Javaç½‘ç»œç¼–ç¨‹é¢è¯•é¢˜(ä¸€)</div></a> <span>07-24</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/5cc189/"><div>Java Steam API</div></a> <span>07-24</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">æ›´å¤šæ–‡ç« &gt;</a></dt></dl></div></div> </main></div> <div class="footer"><div class="icons"><a href="mailto:ardien@126.com" title="å‘é‚®ä»¶" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/kangec" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="http://music.163.com/playlist?id=630677470" title="å¬éŸ³ä¹" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="æœ¬ç«™ä¸»é¢˜">Vdoing</a> 
     | Copyright Â© 2021-2020
    <span>Kangec | MIT License</span></div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          è·Ÿéšç³»ç»Ÿ
        </li><li class="iconfont icon-rijianmoshi">
          æµ…è‰²æ¨¡å¼
        </li><li class="iconfont icon-yejianmoshi">
          æ·±è‰²æ¨¡å¼
        </li><li class="iconfont icon-yuedu">
          é˜…è¯»æ¨¡å¼
        </li></ul></div></div> <div class="body-bg" style="background:url(https://cdn.jsdelivr.net/gh/xugaoyi/image_store/blog/20200507175828.jpeg) center center / cover no-repeat;"></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.77792ac2.js" defer></script><script src="/assets/js/2.b4afc22d.js" defer></script><script src="/assets/js/8.498b1d4c.js" defer></script>
  </body>
</html>